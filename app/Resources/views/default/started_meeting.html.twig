{% extends 'base.html.twig' %}

{% block head %}
    <title>Meeting gestartet</title>
{% endblock %}

{% block body %}
<h1>Meeting gestartet</h1>
<h2>Name des Meetings: {{ meeting_name }}</h2>
<br />

    <div id = "countdownExample">
    {% for agenda in agendas %}
        <h4><td>Agendapunkt: {{ agenda.name }}   Minuten: <span class="values" id="time_{{loop.index }}">{{ agenda.minutes }}</span></td><br /></h4>
    {% endfor %}
    </div>
 
    <button class="startButton">Starten</button>
    

<script>
window.onload = function () {
    var timer = [];
    
    $('.values').each(function(index){
        console.log($(this).attr('id'));
        console.log(index);
        timer[index] = new Timer();
        console.log(timer[index]);
        $.each(timer, function(index, value){
            console.log(timer);
            timer[index].start({countdown: true, startValues: {seconds: jQuery('#time_' +(index+1)).text()}});
            $('#countdownExample #time_' +(index+1)).html(timer[index].getTimeValues().toString());
            timer[index].addEventListener('secondsUpdated', function (e) {
                $('#countdownExample #time_' +(index+1)).html(timer[index].getTimeValues().toString());
            });
            timer[index].addEventListener('targetAchieved', function (e) {
                $('#countdownExample #time_' +(index+1)).html('FERTIG');
            });
        });
    });
};

</script>

{% endblock %}
