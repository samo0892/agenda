{% extends 'base.html.twig' %}

{% block head %}
    <title>Meeting gestartet</title>
{% endblock %}

{% block body %}
<h1>Meeting gestartet</h1>
<h2>Name des Meetings: {{ meeting_name }}</h2>
<br />

    <div id = "countdownExample">
    {% for agenda in agendas %}
        <h4><td>Agendapunkt: {{ agenda.name }}   Minuten: <span class="values" id="time_{{loop.index }}">{{ agenda.minutes }}</span></td><br /></h4>
    {% endfor %}
    </div>
 
    <button class="startButton">Starten</button>
    

<script>
window.onload = function () {
    
    var elements = [];
    
    $('.values').each(function() {
            elements.push(this);
        });    
         console.log(elements);

    
    console.log(elements);   
    var arrayLength = elements.length + 1;
    console.log(arrayLength);
    var i = 0;
    var timer = new Timer();
    $('.values').each(function(){
        console.log($(this).attr('id'));
        timer.start({countdown: true, startValues: {seconds: jQuery('#time_' +i).text()}});
        $('#countdownExample #time_' +i).html(timer.getTimeValues().toString());
        timer.addEventListener('secondsUpdated', function (e) {
            $('#countdownExample #time_' +i).html(timer.getTimeValues().toString());
        });
        timer.addEventListener('targetAchieved', function (e) {
            $('#countdownExample #time_' +i).html('FERTIG');
        });
        i++;
    });
};

</script>

{% endblock %}
